# ########################################################################################################
# modelsim compilation script for aes_engine_sbox
# ########################################################################################################
#  Creation : 21/02/2022 
#  Author(s): Jack O'Keefe

# ##################################################################################################################################
# Check if the script was called by the CI Server
# ##################################################################################################################################
if { [info exists CONTINUOUS_INTEGRATION] } {
  onerror { exit -code 171 }
}

# ##################################################################################################################################
# Set Path to RTL code
# ##################################################################################################################################
set PROJECT_PATH ../../..
set CODE_PATH    ../../../imp/code/devlib

# Delete previous compilation
file delete -force comp_libraries
file mkdir comp_libraries

# ##################################################################################################################################
# LIBRARIES
# ##################################################################################################################################

# ==================================================================================================================================
# Sync library
# ==================================================================================================================================
set lib_name aes_engine
vlib comp_libraries/$lib_name
vmap $lib_name comp_libraries/$lib_name

vcom -work $lib_name -2008 -explicit \
  $CODE_PATH/aes_engine/aes_engine_pkg.vhd\
  $CODE_PATH/aes_engine/aes_engine_round.vhd